<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>wCMF 4.0: ConcurrencyManager Interface Reference</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="A MDSD framework for building reliable, maintainable and extendable web applications with PHP">
  <meta name="keywords" content="PHP, web application framework, model driven development">
  <meta name="author" content="wemove digital solutions">
  <link rel="shortcut icon" href="theme/images/favicon.ico">
  <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
  <!--[if lt IE 9]>
        <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
      <![endif]-->
  <link href="theme/css/doxstyles.css" rel="stylesheet">
  <script src="jquery.js"></script>
  <script src="theme/bootstrap3/js/bootstrap.min.js"></script>
  <link href="theme/bootstrap3/css/bootstrap.min.css" rel="stylesheet">
  <link href="theme/bootstrap3/css/font-awesome.min.css" rel="stylesheet">
  <script src="theme/js/tocify/jquery.tocify.min.js"></script>
  <link href="theme/js/tocify/jquery.tocify.css" rel="stylesheet">
  <script src="theme/js/doxy-boot.js"></script>
  <script src="theme/js/application.js"></script>
  <script src="dynsections.js"></script>
  <link href="theme/css/syntax.css" rel="stylesheet">
  <link href="theme/css/style.css" rel="stylesheet">
  <script src="search/search.js"></script>
  <script src="search/searchdata.js"></script>
</head>
<body style="min-height: 200px; padding-top: 50px;">
<header class="navbar navbar-inverse navbar-fixed-top bs-docs-nav">
  <div class="container">
    <div class="row">
      <div class="col-md-offset-1 col-sm-offset-0 col-md-10">
        <div class="navbar-header">
          <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".menu-navbar-collapse">
            <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="index.html">wCMF 4.0</a>
        </div>
        <div class="collapse navbar-collapse menu-navbar-collapse" role="navigation">
          <ul class="nav navbar-nav">
            <li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-hand-o-right"></i> Guides <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="gettingstarted.html">Getting started</a></li>
                <li><a href="architecture.html">Architecture</a></li>
                <li><a href="model.html">Model</a></li>
                <li><a href="persistence.html">Persistence</a></li>
                <li><a href="presentation.html">Presentation</a></li>
                <li><a href="configuration.html">Configuration</a></li>
                <li><a href="security.html">Security</a></li>
                <li><a href="i18n_l10n.html">I18n & l10n</a></li>
                <li><a href="tests.html">Tests</a></li>
              </ul>
            </li>
            <li class="dropdown"><a href="annotated.html"><i class="fa fa-file-text-o"></i> API</a></li>
            <li><a href="https://github.com/iherwig/wcmf"><i class="fa fa-github"></i> Code</a></li>
            <li><a href="support.html"><i class="fa fa-support"></i> Support</a></li>
          </ul>
          <ul class="nav navbar-nav pull-right">
            <li>
              <div id="MSearchBox">
                <input id="MSearchField" type="text" class="form-control" placeholder="Search API" name="query" onkeyup="searchBox.OnSearchFieldChange(event)">
              </div>
              <div id="MSearchSelect"></div>
              <div id="MSearchClose"></div>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>
<a class="anchor" id="top"></a>
<div class="content" id="content">
  <div class="container">
    <div class="row" style="margin-top: 20px;">
      <div class="col-md-offset-1 col-sm-offset-0 col-md-10 panel panel-default">
       <div>
<!-- end header part --><!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
//var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacewcmf.html">wcmf</a></li><li class="navelem"><a class="el" href="namespacewcmf_1_1lib.html">lib</a></li><li class="navelem"><a class="el" href="namespacewcmf_1_1lib_1_1persistence.html">persistence</a></li><li class="navelem"><a class="el" href="namespacewcmf_1_1lib_1_1persistence_1_1concurrency.html">concurrency</a></li><li class="navelem"><a class="el" href="interfacewcmf_1_1lib_1_1persistence_1_1concurrency_1_1_concurrency_manager.html">ConcurrencyManager</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="interfacewcmf_1_1lib_1_1persistence_1_1concurrency_1_1_concurrency_manager-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ConcurrencyManager Interface Reference</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="interfacewcmf_1_1lib_1_1persistence_1_1concurrency_1_1_concurrency_manager.html" title="ConcurrencyManager is used to handle concurrency for objects. ">ConcurrencyManager</a> is used to handle concurrency for objects. </p>
<p>Depending on the lock type, locking has different semantics:</p><ul>
<li>Optimistic locks can be aquired on the same object by different users. This lock quarantees that an exception is thrown, if the user tries to persist an object, which another used has updated, since the user retrieved it.</li>
<li>Pessimistic (write) locks can be aquired on the same object only by one user. This lock quarantees that no other user can modify the object until the lock is released. A user can only aquire one lock on each object. An exeption is thrown, if a user tries to aquire a lock on an object on which another user already owns a pessimistic lock.</li>
</ul>
<dl class="section author"><dt>Author</dt><dd>ingo herwig <a href="#" onclick="location.href='mai'+'lto:'+'ing'+'o@'+'wem'+'ov'+'e.c'+'om'; return false;">ingo@<span style="display: none;">.nosp@m.</span>wemo<span style="display: none;">.nosp@m.</span>ve.co<span style="display: none;">.nosp@m.</span>m</a> </dd></dl>

<p>Definition at line <a class="el" href="_concurrency_manager_8php_source.html#l00032">32</a> of file <a class="el" href="_concurrency_manager_8php_source.html">ConcurrencyManager.php</a>.</p>
</div><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Inheritance diagram for ConcurrencyManager:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="interfacewcmf_1_1lib_1_1persistence_1_1concurrency_1_1_concurrency_manager__inherit__graph.svg" width="196" height="404"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af2587aae6d4b83240e4f2af303bedb67"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfacewcmf_1_1lib_1_1persistence_1_1concurrency_1_1_concurrency_manager.html#af2587aae6d4b83240e4f2af303bedb67">aquireLock</a> (<a class="el" href="classwcmf_1_1lib_1_1persistence_1_1_object_id.html">ObjectId</a> $oid, $type, <a class="el" href="interfacewcmf_1_1lib_1_1persistence_1_1_persistent_object.html">PersistentObject</a> $currentState=null)</td></tr>
<tr class="separator:af2587aae6d4b83240e4f2af303bedb67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01b6b1a8d60d02ba834481c8f52a9052"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfacewcmf_1_1lib_1_1persistence_1_1concurrency_1_1_concurrency_manager.html#a01b6b1a8d60d02ba834481c8f52a9052">releaseLock</a> (<a class="el" href="classwcmf_1_1lib_1_1persistence_1_1_object_id.html">ObjectId</a> $oid, $type=null)</td></tr>
<tr class="separator:a01b6b1a8d60d02ba834481c8f52a9052"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abeb5d0739d9ae661e8d3d49d857bcad3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfacewcmf_1_1lib_1_1persistence_1_1concurrency_1_1_concurrency_manager.html#abeb5d0739d9ae661e8d3d49d857bcad3">releaseLocks</a> (<a class="el" href="classwcmf_1_1lib_1_1persistence_1_1_object_id.html">ObjectId</a> $oid)</td></tr>
<tr class="separator:abeb5d0739d9ae661e8d3d49d857bcad3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a238737b9f57975f3fa9e2f58e92742"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfacewcmf_1_1lib_1_1persistence_1_1concurrency_1_1_concurrency_manager.html#a5a238737b9f57975f3fa9e2f58e92742">releaseAllLocks</a> ()</td></tr>
<tr class="separator:a5a238737b9f57975f3fa9e2f58e92742"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab50182e55c29b404afbc2f58fd545977"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfacewcmf_1_1lib_1_1persistence_1_1concurrency_1_1_concurrency_manager.html#ab50182e55c29b404afbc2f58fd545977">getLock</a> (<a class="el" href="classwcmf_1_1lib_1_1persistence_1_1_object_id.html">ObjectId</a> $oid)</td></tr>
<tr class="separator:ab50182e55c29b404afbc2f58fd545977"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7d0ca14919c9e8fd089296a5b99bc27"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfacewcmf_1_1lib_1_1persistence_1_1concurrency_1_1_concurrency_manager.html#af7d0ca14919c9e8fd089296a5b99bc27">checkPersist</a> (<a class="el" href="interfacewcmf_1_1lib_1_1persistence_1_1_persistent_object.html">PersistentObject</a> $object)</td></tr>
<tr class="separator:af7d0ca14919c9e8fd089296a5b99bc27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0bbe33ac146c4bb71270ee61b7dbb6c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfacewcmf_1_1lib_1_1persistence_1_1concurrency_1_1_concurrency_manager.html#ae0bbe33ac146c4bb71270ee61b7dbb6c">updateLock</a> (<a class="el" href="classwcmf_1_1lib_1_1persistence_1_1_object_id.html">ObjectId</a> $oid, <a class="el" href="interfacewcmf_1_1lib_1_1persistence_1_1_persistent_object.html">PersistentObject</a> $object)</td></tr>
<tr class="separator:ae0bbe33ac146c4bb71270ee61b7dbb6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="af2587aae6d4b83240e4f2af303bedb67"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">aquireLock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classwcmf_1_1lib_1_1persistence_1_1_object_id.html">ObjectId</a>&#160;</td>
          <td class="paramname"><em>$oid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interfacewcmf_1_1lib_1_1persistence_1_1_persistent_object.html">PersistentObject</a>&#160;</td>
          <td class="paramname"><em>$currentState</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Aquire a lock on an <a class="el" href="classwcmf_1_1lib_1_1persistence_1_1_object_id.html" title="ObjectId is the unique identifier of an object. ">ObjectId</a> for the current user. </p>
<p>Throws an exception if locking fails. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$oid</td><td>The object id of the object to lock. </td></tr>
    <tr><td class="paramname">$type</td><td>One of the Lock::Type constants. </td></tr>
    <tr><td class="paramname">$currentState</td><td><a class="el" href="interfacewcmf_1_1lib_1_1persistence_1_1_persistent_object.html" title="PersistentObject defines the interface of all persistent objects. ">PersistentObject</a> instance defining the current state for an optimistic lock (optional, if not given, the current state will be loaded from the store) </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="classwcmf_1_1lib_1_1persistence_1_1concurrency_1_1impl_1_1_default_concurrency_manager.html#af2587aae6d4b83240e4f2af303bedb67">DefaultConcurrencyManager</a>.</p>

</div>
</div>
<a class="anchor" id="a01b6b1a8d60d02ba834481c8f52a9052"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">releaseLock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classwcmf_1_1lib_1_1persistence_1_1_object_id.html">ObjectId</a>&#160;</td>
          <td class="paramname"><em>$oid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$type</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Release a lock on an <a class="el" href="classwcmf_1_1lib_1_1persistence_1_1_object_id.html" title="ObjectId is the unique identifier of an object. ">ObjectId</a> for the current user. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$oid</td><td>object id of the object to release. </td></tr>
    <tr><td class="paramname">$type</td><td>One of the Lock::Type constants or null for all types (default: <em>null</em>) </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="classwcmf_1_1lib_1_1persistence_1_1concurrency_1_1impl_1_1_default_concurrency_manager.html#a01b6b1a8d60d02ba834481c8f52a9052">DefaultConcurrencyManager</a>.</p>

</div>
</div>
<a class="anchor" id="abeb5d0739d9ae661e8d3d49d857bcad3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">releaseLocks </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classwcmf_1_1lib_1_1persistence_1_1_object_id.html">ObjectId</a>&#160;</td>
          <td class="paramname"><em>$oid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Release all locks on an <a class="el" href="classwcmf_1_1lib_1_1persistence_1_1_object_id.html" title="ObjectId is the unique identifier of an object. ">ObjectId</a> regardless of the user. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$oid</td><td>object id of the object to release. </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="classwcmf_1_1lib_1_1persistence_1_1concurrency_1_1impl_1_1_default_concurrency_manager.html#abeb5d0739d9ae661e8d3d49d857bcad3">DefaultConcurrencyManager</a>.</p>

</div>
</div>
<a class="anchor" id="a5a238737b9f57975f3fa9e2f58e92742"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">releaseAllLocks </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Release all locks for the current user. </p>

<p>Implemented in <a class="el" href="classwcmf_1_1lib_1_1persistence_1_1concurrency_1_1impl_1_1_default_concurrency_manager.html#a5a238737b9f57975f3fa9e2f58e92742">DefaultConcurrencyManager</a>.</p>

</div>
</div>
<a class="anchor" id="ab50182e55c29b404afbc2f58fd545977"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">getLock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classwcmf_1_1lib_1_1persistence_1_1_object_id.html">ObjectId</a>&#160;</td>
          <td class="paramname"><em>$oid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the lock for an object id. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$oid</td><td>object id of the object to get the lock data for. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="classwcmf_1_1lib_1_1persistence_1_1concurrency_1_1_lock.html" title="Lock represents a lock on an object. ">Lock</a> instance or null </dd></dl>

<p>Implemented in <a class="el" href="classwcmf_1_1lib_1_1persistence_1_1concurrency_1_1impl_1_1_default_concurrency_manager.html#ab50182e55c29b404afbc2f58fd545977">DefaultConcurrencyManager</a>.</p>

</div>
</div>
<a class="anchor" id="af7d0ca14919c9e8fd089296a5b99bc27"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">checkPersist </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interfacewcmf_1_1lib_1_1persistence_1_1_persistent_object.html">PersistentObject</a>&#160;</td>
          <td class="paramname"><em>$object</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if the given object can be persisted. </p>
<p>Throws an exception if not. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$object</td><td>The object to check. </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="classwcmf_1_1lib_1_1persistence_1_1concurrency_1_1impl_1_1_default_concurrency_manager.html#af7d0ca14919c9e8fd089296a5b99bc27">DefaultConcurrencyManager</a>.</p>

</div>
</div>
<a class="anchor" id="ae0bbe33ac146c4bb71270ee61b7dbb6c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">updateLock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classwcmf_1_1lib_1_1persistence_1_1_object_id.html">ObjectId</a>&#160;</td>
          <td class="paramname"><em>$oid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interfacewcmf_1_1lib_1_1persistence_1_1_persistent_object.html">PersistentObject</a>&#160;</td>
          <td class="paramname"><em>$object</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update the current state of the lock belonging to the given object if existing and owned by the current. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$oid</td><td>The object id. </td></tr>
    <tr><td class="paramname">$object</td><td>The updated object data. </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="classwcmf_1_1lib_1_1persistence_1_1concurrency_1_1impl_1_1_default_concurrency_manager.html#ae0bbe33ac146c4bb71270ee61b7dbb6c">DefaultConcurrencyManager</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
      </div>
    </div>
  </div>
</div>
<hr>
<footer>
  <div class="container">
    <div class="row">
      <div class="col-md-9">
        <small>&copy; 2016 <a href="http://www.wemove.com" target="_blank">wemove digital solutions</a><br>
          Generated on Fri Jul 15 2016 22:20:47 for wCMF by &#160;<a href="http://www.doxygen.org/index.html" target="_blank">doxygen</a> 1.8.10</small>
      </div>
    </div>
  </div>
</footer>
</body>
</html>
